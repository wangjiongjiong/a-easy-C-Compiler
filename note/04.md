# 一个简单的c语言编译器 04  词法分析器

## 词法分析器是什么

词法分析器是用于对源代码字符串进行预处理，从而减轻语法分析器的复杂程度。

词法分析器是以源码字符串作为输入，输出为标记流，即一连串的标记也就是我们常说的`token`，每个`token`通常包括`(token，token_value)`，表示标记和标记的值。通过词法分析器的预处理，语法分析器的复杂度会大大降低，这点在后面的语法分析器我们就能体会。

从小的方面来看其实词法分析器也是一个小型的编译器，编译器本质上输入的是标记流，输出一段相对应的汇编代码，而词法分析器对应的输入是源代码字符串，输出的是标记流。如果我们直接对源代码进行语法分析相对应的就会很困难，但是如果我们可以先将源代码转化为简化的标记流那么，对于语法分析的部分来讲就会简单一些。

## 实现

词法分析的工作普遍比较枯燥且易错，因此目前已经有许多自动生成工具来生成词法分析器。例如：`lex，flex`。

在实现词法分析器之前，还有一个问题要说明一下，在本词法分析器中我们并不会一次性将所有的源码都生成为标记流。因为字符串转化为标记流所对应的上下文是有关联的。其次有些标记流是没有意义的因此我们也无需保留。

我们实现的框架就是每次想要生成下一个标记就调用`next()`函数。

在学习c语言时我们会经常发现一些标记是包括多个字符的例如==，<<等这些标记如果不进行处理后续会非常麻烦，因此我们所支持的标记符都会压缩为单个字符，当然有一些字符自己就构成的标记例如波浪号`~`，右方括号`]`类似这些字符我们就不会进行预处理，因为这些字符是单字符，并且也不涉及优先关系。

## 词法分析器框架

